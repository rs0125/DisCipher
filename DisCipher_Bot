import discord
from discord.ui import Button, View
from discord import app_commands
from morsecode import encode, decode
from discord import ui

token = 'xxxxxxxxxxxxxxxxxxxxxxxxxx'
intents = discord.Intents.default()
client = discord.Client(intents=intents)
tree = app_commands.CommandTree(client)

ENC = Button(label="Encode (E -> M)", style=discord.ButtonStyle.blurple)
DEC = Button(label="Decode (M -> E)", style=discord.ButtonStyle.blurple)

@client.event
async def on_ready():
    await tree.sync(guild=discord.Object(id=1109016227210350634))
    print("DisCipher up")

@tree.command(name = "morse", description = "displays available subjects", guild=discord.Object(id=1109016227210350634))
async def first_command(interaction,):
    view = View()
    view.add_item(ENC)
    view.add_item(DEC)
    await interaction.response.send_message('Would you like to Decode from morse to english, or encode from english to morse?', view=view)

    async def encodercallback(interaction):

            answer = ui.TextInput(label='Answer', style=discord.TextStyle.paragraph)
            await interaction.response.send_message(encode(answer))

    ENC.callback = encodercallback



client.run(token)
